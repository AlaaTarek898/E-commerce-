{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Alaa/NEXT/next/src/lib/services/cart.services.ts"],"sourcesContent":["'use server'\r\n\r\nimport GetMyToken from \"@/app/Utilities/GetMyToken\";\r\n\r\n// export async function addToCart(productId: string) {\r\n//     const token = await GetMyToken();\r\n//     console.log(\"Token from GetMyToken:\", token); \r\n\r\n//     if (!token) {\r\n//         console.error(\"No token found, cannot add to cart\");\r\n//         return;\r\n//     }\r\n\r\n//     const res = await fetch('https://ecommerce.routemisr.com/api/v1/cart', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             \"Content-Type\": \"application/json\",\r\n//             token: token ? String(token) : \"\", \r\n//         },\r\n//         body: JSON.stringify({ productId }),\r\n//     });\r\n\r\n//     const data = await res.json();\r\n//     if (data.status === 'success') return data;\r\n//     console.log('error');\r\n// }\r\n// lib/services/cart.services.ts\r\nexport async function addToCart(productId: string, token: string) {\r\n  if (!token) {\r\n    console.error(\"No token found, cannot add to cart\");\r\n    return;\r\n  }\r\n\r\n  const res = await fetch('https://ecommerce.routemisr.com/api/v1/cart', {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      token,\r\n    },\r\n    body: JSON.stringify({ productId }),\r\n  });\r\n\r\n  const data = await res.json();\r\n  if (data.status === 'success') return data;\r\n  console.log('error');\r\n}\r\n\r\n\r\n// export async function getLoggedCart() {\r\n//     const token = await GetMyToken();\r\n\r\n//     const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart`, {\r\n//         method: 'GET',\r\n//         headers: {\r\n//             token: token ? String(token) : \"\",\r\n//         },\r\n//     });\r\n\r\n//     const data = await res.json();\r\n//     if (data.status === 'success') return data;\r\n//     console.log('error');\r\n// }\r\nexport async function getLoggedCart() {\r\n  try {\r\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n\r\n    if (!token) {\r\n      console.warn(\"No token found for getLoggedCart\");\r\n      return null;\r\n    }\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        token: token,\r\n      },\r\n    });\r\n\r\n    const data = await res.json();\r\n    return data;\r\n   \r\n\r\n  } catch (err) {\r\n    console.error(\"Error fetching cart:\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\nexport async function deleteSpecificItem(productId: string) {\r\n    const token = await GetMyToken();\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart/${productId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            token: token ? String(token) : \"\",\r\n        },\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (data.status === 'success') return data;\r\n    console.log('error');\r\n}\r\n\r\nexport async function UpdateSpecificItem({ productId, count }: { productId: string, count: number }) {\r\n    const token = await GetMyToken();\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart/${productId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            token: token ? String(token) : \"\",\r\n        },\r\n        body: JSON.stringify({ productId, count }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (data.status === 'success') return data;\r\n    console.log('error');\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAyFsB,qBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/Alaa/NEXT/next/src/lib/services/cart.services.ts"],"sourcesContent":["'use server'\r\n\r\nimport GetMyToken from \"@/app/Utilities/GetMyToken\";\r\n\r\n// export async function addToCart(productId: string) {\r\n//     const token = await GetMyToken();\r\n//     console.log(\"Token from GetMyToken:\", token); \r\n\r\n//     if (!token) {\r\n//         console.error(\"No token found, cannot add to cart\");\r\n//         return;\r\n//     }\r\n\r\n//     const res = await fetch('https://ecommerce.routemisr.com/api/v1/cart', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             \"Content-Type\": \"application/json\",\r\n//             token: token ? String(token) : \"\", \r\n//         },\r\n//         body: JSON.stringify({ productId }),\r\n//     });\r\n\r\n//     const data = await res.json();\r\n//     if (data.status === 'success') return data;\r\n//     console.log('error');\r\n// }\r\n// lib/services/cart.services.ts\r\nexport async function addToCart(productId: string, token: string) {\r\n  if (!token) {\r\n    console.error(\"No token found, cannot add to cart\");\r\n    return;\r\n  }\r\n\r\n  const res = await fetch('https://ecommerce.routemisr.com/api/v1/cart', {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      token,\r\n    },\r\n    body: JSON.stringify({ productId }),\r\n  });\r\n\r\n  const data = await res.json();\r\n  if (data.status === 'success') return data;\r\n  console.log('error');\r\n}\r\n\r\n\r\n// export async function getLoggedCart() {\r\n//     const token = await GetMyToken();\r\n\r\n//     const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart`, {\r\n//         method: 'GET',\r\n//         headers: {\r\n//             token: token ? String(token) : \"\",\r\n//         },\r\n//     });\r\n\r\n//     const data = await res.json();\r\n//     if (data.status === 'success') return data;\r\n//     console.log('error');\r\n// }\r\nexport async function getLoggedCart() {\r\n  try {\r\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n\r\n    if (!token) {\r\n      console.warn(\"No token found for getLoggedCart\");\r\n      return null;\r\n    }\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        token: token,\r\n      },\r\n    });\r\n\r\n    const data = await res.json();\r\n    return data;\r\n   \r\n\r\n  } catch (err) {\r\n    console.error(\"Error fetching cart:\", err);\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\nexport async function deleteSpecificItem(productId: string) {\r\n    const token = await GetMyToken();\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart/${productId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            token: token ? String(token) : \"\",\r\n        },\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (data.status === 'success') return data;\r\n    console.log('error');\r\n}\r\n\r\nexport async function UpdateSpecificItem({ productId, count }: { productId: string, count: number }) {\r\n    const token = await GetMyToken();\r\n\r\n    const res = await fetch(`https://ecommerce.routemisr.com/api/v1/cart/${productId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            token: token ? String(token) : \"\",\r\n        },\r\n        body: JSON.stringify({ productId, count }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (data.status === 'success') return data;\r\n    console.log('error');\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAwGsB,qBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/Alaa/NEXT/next/src/app/loading.tsx"],"sourcesContent":["export default function Loading() {\r\n  return (\r\n    <div className=\"loader m-auto h-dvh\"></div>\r\n\r\n  );\r\n}\r\n/* HTML: <div class=\"loader\"></div> */\r\n"],"names":[],"mappings":";;;;;;AAAe,SAAS;IACtB,qBACE,6LAAC;QAAI,WAAU;;;;;;AAGnB,EACA,oCAAoC;KANZ","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///D:/Alaa/NEXT/next/src/app/_components/Cart/Cart.tsx"],"sourcesContent":["'use client'\r\nimport * as React from 'react';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\r\nimport { CartContext } from '@/context/CartConetxt';\r\nimport { deleteSpecificItem, UpdateSpecificItem } from '@/lib/services/cart.services';\r\nimport Loading from '@/app/loading';\r\nimport { ICartResponse } from '@/lib/interfaces/cart';\r\n\r\nexport default function Cart() {\r\n  const cartContext = React.useContext(CartContext);\r\n\r\n  if (!cartContext) return <Loading />; \r\n\r\n  const { cartItems, setNoCartItems, setCartItems, setPrice, price } = cartContext;\r\n\r\n\r\n  type CartProductItem = NonNullable<ICartResponse['data']>['products'][0];\r\n\r\n  const handleDeleteProduct = async (id: string) => {\r\n    const data = await deleteSpecificItem(id);\r\n    if (data?.status === 'success') {\r\n      setNoCartItems(data.numOfCartItems);\r\n      setCartItems(data);\r\n      setPrice(data.data?.totalCartPrice ?? 0);\r\n    }\r\n  };\r\n\r\n  const handleUpdateProduct = async ({ productId, count }: { productId: string; count: number }) => {\r\n    if (count < 1) return; // منع العدادات من النزول للصفر\r\n    const data = await UpdateSpecificItem({ productId, count });\r\n    if (data?.status === 'success') {\r\n      setNoCartItems(data.numOfCartItems);\r\n      setCartItems(data);\r\n      setPrice(data.data?.totalCartPrice ?? 0);\r\n    }\r\n  };\r\n\r\n  if (!cartItems) return <Loading />;\r\n\r\n  if (!cartItems.data?.products || cartItems.data.products.length === 0)\r\n    return <p className=\"text-center mt-10\">No items added</p>;\r\n\r\n  return (\r\n    <div className=\"container mt-10\">\r\n      <TableContainer component={Paper}>\r\n        <Table sx={{ minWidth: 650 }} aria-label=\"cart table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Product</TableCell>\r\n              <TableCell align=\"center\">Price</TableCell>\r\n              <TableCell align=\"center\">Quantity</TableCell>\r\n              <TableCell align=\"center\">SubTotal</TableCell>\r\n              <TableCell align=\"center\">Remove</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {cartItems.data.products.map((row: CartProductItem) => (\r\n              <TableRow key={row._id}>\r\n                <TableCell>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <Image src={row.product.imageCover} alt={row.product.title} width={80} height={80} />\r\n                    <p className=\"font-bold\">{row.product.title}</p>\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell align=\"center\">{row.price} EGY</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <div className=\"flex justify-center items-center\">\r\n                    <button\r\n                      onClick={() => handleUpdateProduct({ productId: row.product._id, count: row.count + 1 })}\r\n                      className=\"px-3 py-1 border-2 border-gray-400 text-center\"\r\n                    >\r\n                      +\r\n                    </button>\r\n                    <div className=\"px-3 py-1 border-2 border-gray-400 text-center w-12\">{row.count}</div>\r\n                    <button\r\n                      onClick={() => handleUpdateProduct({ productId: row.product._id, count: row.count - 1 })}\r\n                      className=\"px-3 py-1 border-2 border-gray-400 text-center\"\r\n                    >\r\n                      -\r\n                    </button>\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell align=\"center\">{row.price * row.count} EGY</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <button\r\n                    className=\"px-3 py-1 flex justify-center items-center hover:cursor-pointer\"\r\n                    onClick={() => handleDeleteProduct(row.product._id)}\r\n                  >\r\n                    <DeleteForeverIcon />\r\n                  </button>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n\r\n      <div className=\"mt-6 flex justify-end\">\r\n        <div className=\"border-2 border-gray-300 w-4/12 p-4\">\r\n          <p className=\"text-2xl font-bold mb-4\">Cart Total</p>\r\n          <div className=\"flex justify-between mb-2 border-b-2\">\r\n            <span>Sub Total</span>\r\n            <span>{price} EGY</span>\r\n          </div>\r\n          <div className=\"flex justify-between mb-2 border-b-2\">\r\n            <span>Shipping</span>\r\n            <span>Free</span>\r\n          </div>\r\n          <div className=\"flex justify-between mb-4 border-b-2\">\r\n            <span>Total</span>\r\n            <span>{price} EGY</span>\r\n          </div>\r\n          <Link\r\n            href=\"/checkOut\"\r\n            className=\"block text-center w-full p-3 bg-red-400 text-white hover:bg-red-600\"\r\n          >\r\n            Proceed to Checkout\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///D:/Alaa/NEXT/next/src/lib/services/payment.services.ts"],"sourcesContent":["import GetMyToken from \"@/app/Utilities/GetMyToken\";\r\n\r\n// حددنا نوع الـ form بدل any\r\ninterface ShippingForm {\r\n  firstName: string;\r\n  details: string;\r\n  phoneNumber: string;\r\n  townCity: string;\r\n}\r\n\r\nexport async function cashOnDelivery(cartid: string, form: ShippingForm) {\r\n  const token = await GetMyToken();\r\n  const res = await fetch(`https://ecommerce.routemisr.com/api/v1/orders/${cartid}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      token: token ? String(token) : \"\",\r\n    },\r\n    body: JSON.stringify({\r\n      shippingAddress: form,\r\n    }),\r\n  });\r\n  const data = await res.json();\r\n  console.log(data);\r\n  if (data.status === 'success') {\r\n    return data;\r\n  } else {\r\n    console.log('error');\r\n  }\r\n}\r\n\r\nexport async function online(cartid: string, form: ShippingForm) {\r\n  const token = await GetMyToken();\r\n  const res = await fetch(\r\n    `https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${cartid}?url=http://localhost:3000`,\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        token: token ? String(token) : \"\",\r\n      },\r\n      body: JSON.stringify({\r\n        shippingAddress: form,\r\n      }),\r\n    }\r\n  );\r\n  const data = await res.json();\r\n  console.log(data);\r\n  if (data.status === 'success') {\r\n    return data;\r\n  } else {\r\n    console.log('error');\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAUO,eAAe,eAAe,MAAc,EAAE,IAAkB;IACrE,MAAM,QAAQ,MAAM,IAAA,6KAAU;IAC9B,MAAM,MAAM,MAAM,MAAM,AAAC,iDAAuD,OAAP,SAAU;QACjF,QAAQ;QACR,SAAS;YACP,gBAAgB;YAChB,OAAO,QAAQ,OAAO,SAAS;QACjC;QACA,MAAM,KAAK,SAAS,CAAC;YACnB,iBAAiB;QACnB;IACF;IACA,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,QAAQ,GAAG,CAAC;IACZ,IAAI,KAAK,MAAM,KAAK,WAAW;QAC7B,OAAO;IACT,OAAO;QACL,QAAQ,GAAG,CAAC;IACd;AACF;AAEO,eAAe,OAAO,MAAc,EAAE,IAAkB;IAC7D,MAAM,QAAQ,MAAM,IAAA,6KAAU;IAC9B,MAAM,MAAM,MAAM,MAChB,AAAC,kEAAwE,OAAP,QAAO,+BACzE;QACE,QAAQ;QACR,SAAS;YACP,gBAAgB;YAChB,OAAO,QAAQ,OAAO,SAAS;QACjC;QACA,MAAM,KAAK,SAAS,CAAC;YACnB,iBAAiB;QACnB;IACF;IAEF,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,QAAQ,GAAG,CAAC;IACZ,IAAI,KAAK,MAAM,KAAK,WAAW;QAC7B,OAAO;IACT,OAAO;QACL,QAAQ,GAAG,CAAC;IACd;AACF","debugId":null}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///D:/Alaa/NEXT/next/src/app/checkOut/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { FormEvent, useContext } from 'react';\r\nimport Input from '@mui/material/Input';\r\nimport Cart from '../_components/Cart/Cart';\r\nimport { CartContext } from '@/context/CartConetxt';\r\nimport { cashOnDelivery, online } from '@/lib/services/payment.services';\r\nimport { useRouter } from 'next/navigation';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport default function CheckOut() {\r\n  const [payment, setPayment] = React.useState<'cash' | 'online'>('cash');\r\n  const [form, setForm] = React.useState({\r\n    firstName: '',\r\n    details: '',\r\n    phoneNumber: '',\r\n    townCity: '',\r\n  });\r\n\r\n  const router = useRouter();\r\n  const { cartid, cartItems, setNoCartItems, setPrice, setCartid, setCartItems } = useContext(CartContext)!;\r\n\r\n  async function submit(e: FormEvent) {\r\n    e.preventDefault();\r\n\r\n    if (!cartid) return toast.error('Cart is empty');\r\n\r\n    if (payment === 'cash') {\r\n      const res = await cashOnDelivery(cartid, form);\r\n\r\n      if (res?.status === 'success') {\r\n        // ✅ مسح الكارت بعد الدفع\r\n        setNoCartItems(0);\r\n        setCartItems(null); // الكارت أصبح empty\r\n        setPrice(0);\r\n        setCartid(null);\r\n\r\n        router.push('/');\r\n        toast.success('Order Placed Successfully!');\r\n      }\r\n    } else {\r\n      const res = await online(cartid, form);\r\n\r\n      if (res?.status === 'success') {\r\n        location.href = res.session?.url;\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-11/12 m-auto mt-10\">\r\n      <main className=\"flex flex-col md:flex-row justify-between\">\r\n        {/* Billing details form */}\r\n        <div className=\"w-full md:w-5/12\">\r\n          <h3 className=\"text-2xl font-bold my-5\">Billing details</h3>\r\n          <form className=\"flex flex-col gap-8 w-full\" onSubmit={submit}>\r\n            <Input fullWidth type=\"text\" placeholder=\"First Name\" required onChange={(e) => setForm({ ...form, firstName: e.target.value })} />\r\n            <Input fullWidth type=\"text\" placeholder=\"Details\" required onChange={(e) => setForm({ ...form, details: e.target.value })} />\r\n            <Input fullWidth type=\"tel\" placeholder=\"Phone Number\" required onChange={(e) => setForm({ ...form, phoneNumber: e.target.value })} />\r\n            <Input fullWidth type=\"text\" placeholder=\"Town/City*\" required onChange={(e) => setForm({ ...form, townCity: e.target.value })} />\r\n\r\n            <div className=\"w-full flex justify-center\">\r\n              <button type=\"submit\" className=\"block text-center w-6/12 p-3 bg-red-400 text-white hover:bg-red-600 hover:cursor-pointer\">\r\n                Place Order\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        {/* Cart & summary */}\r\n        <div className=\"w-full md:w-6/12\">\r\n          <div className=\"w-11/12\">\r\n            <Cart />\r\n          </div>\r\n\r\n          <div className=\"container mt-5\">\r\n            <div className=\"flex justify-between mt-3\">\r\n              <div className=\"mt-3 border-2 border-gray-300 w-full p-3\">\r\n                <p className=\"text-2xl\">Cart total</p>\r\n\r\n                <div className=\"flex justify-between m-3 border-b-2\">\r\n                  <p>Sub total</p>\r\n                  <p>{cartItems?.data?.totalCartPrice ?? 0} EGP</p>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between m-3 border-b-2\">\r\n                  <p>Shipping</p>\r\n                  <p>Free</p>\r\n                </div>\r\n\r\n                <div className=\"flex justify-between m-3 border-b-2\">\r\n                  <p>Total</p>\r\n                  <p>{cartItems?.data?.totalCartPrice ?? 0} EGP</p>\r\n                </div>\r\n\r\n                {/* Payment options */}\r\n                <div className=\"mt-4 flex flex-col ms-5\">\r\n                  <label htmlFor=\"cash\">\r\n                    <input id=\"cash\" type=\"radio\" name=\"payment\" checked={payment === 'cash'} onChange={() => setPayment('cash')} /> Cash\r\n                  </label>\r\n                  <label htmlFor=\"online\">\r\n                    <input id=\"online\" type=\"radio\" name=\"payment\" checked={payment === 'online'} onChange={() => setPayment('online')} /> Online\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}